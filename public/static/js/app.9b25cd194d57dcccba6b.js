webpackJsonp([1],{"7zck":function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("7+uW"),i={data:function(){return{notHome:"Home"!==this.$route.name,title:"Лицей БГУ"}},name:"App",watch:{$route:function(t,e){this.notHome="Home"!==this.$route.name}},methods:{goBack:function(){"Table"!==this.$route.name&&window.history.length>1?this.$router.go(-1):this.$router.push("/")}}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("v-toolbar",{staticClass:"indigo lighten-1 white--text",attrs:{app:"","scroll-off-screen":""}},[t.notHome?a("v-btn",{staticClass:"mx-3 white--text",attrs:{icon:"",ripple:"",href:"#/"},on:{click:function(e){t.goBack()}}},[a("v-icon",[t._v("chevron_left")])],1):t._e(),t._v(" "),a("v-toolbar-title",{domProps:{textContent:t._s(t.title)}}),t._v(" "),a("v-spacer"),t._v(" "),a("v-btn",{staticClass:"mx-3 white--text",attrs:{icon:"",ripple:"",href:"#/search"}},[a("v-icon",[t._v("search")])],1)],1),t._v(" "),a("v-content",[a("v-scale-transition",{attrs:{name:"fade"}},[a("router-view")],1)],1),t._v(" "),a("v-footer",{staticClass:"pa-3",attrs:{app:""}},[a("v-spacer"),t._v(" "),a("div",[t._v("© "+t._s((new Date).getFullYear()))])],1)],1)},staticRenderFns:[]},o=a("VU/8")(i,s,!1,null,null,null).exports,r=a("/ocq"),l=a("mtWM"),c=a.n(l),d=a("Rf8U"),p=a.n(d),u={BASE_URL:"https://lyceumexams.herokuapp.com/api/",NONE_PLACE:{_id:"",code:"All",audience:[]},NONE_AUDIENCE:{_id:"",name:"All"},TABLE_HEADERS:[{text:"Абитуриент",align:"left",value:"firstName"},{text:"Аудитория",value:"audience"}]},v={search:function(t){return n.a.axios.get(u.BASE_URL+"search",{params:{search:t}})},getPupils:function(t){return n.a.axios.get(u.BASE_URL+"pupils",{params:t})},getDictionary:function(){return n.a.axios.get(u.BASE_URL+"dictionary")},getCorpses:function(){return n.a.axios.get(u.BASE_URL+"corpses")},getCorps:function(t){return n.a.axios.get(u.BASE_URL+"corpses/"+t)}},h={data:function(){return{loading:!1,items:[]}},created:function(){this.fetch()},methods:{fetch:function(){this.loading=!0,v.getCorpses().then(this.onSuccess).catch(this.onError).finally(this.loadingEnd)},onSuccess:function(t){this.items=t.data},onError:function(t){console.log(t)},loadingEnd:function(){this.loading=!1}}},g={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{fluid:"","grid-list-md":""}},[a("loading-indicator",{attrs:{loading:t.loading}}),t._v(" "),a("v-data-iterator",{attrs:{"content-tag":"v-layout",row:"",wrap:"","justify-center":"",items:t.items,"total-items":100,"hide-actions":""},scopedSlots:t._u([{key:"item",fn:function(e){return a("v-flex",{attrs:{xs11:""}},[a("v-card",[a("v-card-title",[a("v-flex",[a("h4",[t._v(t._s(e.item.name))])]),t._v(" "),a("v-flex",[a("h3",{staticClass:"headline"},[t._v(t._s(e.item.count)+" / "+t._s(e.item.max))])]),t._v(" "),a("v-flex",{attrs:{xs2:""}},[a("v-btn",{attrs:{icon:"",ripple:"",href:"#/table?corps="+e.item.alias}},[a("v-icon",[t._v("list")])],1)],1)],1),t._v(" "),a("v-list",[1===e.item.places.length?a("v-list-tile",[a("v-list-tile-content",[a("v-list-tile-title",[t._v("\n                    Профиль: \n                    "),t._l(e.item.places,function(e){return a("b",{key:e._id},[t._v("\n                      "+t._s(e.code)+"\n                    ")])})],2)],1)],1):t._e(),t._v(" "),e.item.places.length>1?a("v-list-group",{model:{value:e.item.active,callback:function(a){t.$set(e.item,"active",a)},expression:"props.item.active"}},[a("v-list-tile",{attrs:{slot:"activator"},slot:"activator"},[a("v-list-tile-content",[a("v-list-tile-title",[t._v("\n                    Профили: \n                    "),t._l(e.item.places,function(n,i){return a("b",{key:n._id},[t._v("\n                      "+t._s(n.code)+"\n                      "),i!==e.item.places.length-1?a("span",[t._v(", ")]):t._e()])})],2)],1)],1),t._v(" "),t._l(e.item.places,function(n){return a("v-list-tile",{key:n._id},[a("v-list-tile-content",[a("v-list-tile-title",[t._v("\n                    "+t._s(n.code)+"\n                  ")]),t._v(" "),a("v-list-tile-sub-title",[t._v("\n                    "+t._s(n.count)+" / "+t._s(n.max)+"\n                  ")])],1),t._v(" "),a("v-list-tile-action",[a("v-btn",{attrs:{icon:"",ripple:"",href:"#/table?corps="+e.item.alias+"&place="+n._id}},[a("v-icon",[t._v("list")])],1)],1)],1)})],2):t._e()],1),t._v(" "),a("v-card-actions",[a("v-container",{attrs:{"grid-list-md":"","text-xs-center":""}},[a("v-layout",{attrs:{row:"",wrap:"","justify-space-between":""}},[a("v-btn",{attrs:{flat:"",icon:"",ripple:"",color:"indigo"}},[a("v-badge",{attrs:{bottom:"",color:"red"}},[a("span",{attrs:{slot:"badge"},slot:"badge"},[t._v("12")]),t._v(" "),a("v-icon",[t._v("star")])],1)],1),t._v(" "),a("v-btn",{attrs:{flat:"",icon:"",ripple:"",color:"orange"}},[a("v-badge",{attrs:{bottom:"",color:"red"}},[a("span",{attrs:{slot:"badge"},slot:"badge"},[t._v("12")]),t._v(" "),a("v-icon",[t._v("cached")])],1)],1),t._v(" "),a("v-btn",{attrs:{flat:"",icon:"",ripple:"",color:"purple"}},[a("v-badge",{attrs:{bottom:"",color:"red"}},[a("span",{attrs:{slot:"badge"},slot:"badge"},[t._v("12")]),t._v(" "),a("v-icon",[t._v("star")])],1)],1),t._v(" "),a("v-btn",{attrs:{flat:"",icon:"",ripple:"",color:"light-blue"}},[a("v-badge",{attrs:{bottom:"",color:"red"}},[a("span",{attrs:{slot:"badge"},slot:"badge"},[t._v("12")]),t._v(" "),a("v-icon",[t._v("cached")])],1)],1),t._v(" "),a("v-btn",{attrs:{flat:"",icon:"",ripple:"",color:"teal"}},[a("v-badge",{attrs:{bottom:"",color:"red"}},[a("span",{attrs:{slot:"badge"},slot:"badge"},[t._v("12")]),t._v(" "),a("v-icon",[t._v("star")])],1)],1),t._v(" "),a("v-btn",{attrs:{flat:"",icon:"",ripple:"",color:"deep-orange"}},[a("v-badge",{attrs:{bottom:"",color:"red"}},[a("span",{attrs:{slot:"badge"},slot:"badge"},[t._v("12")]),t._v(" "),a("v-icon",[t._v("cached")])],1)],1)],1)],1)],1)],1)],1)}}])})],1)},staticRenderFns:[]};var f=a("VU/8")(h,g,!1,function(t){a("XF4I")},"data-v-05f460da",null).exports,m=a("woOf"),_=a.n(m),x={data:function(){return{search:"",loading:!1,dialog:!1,editedIndex:-1,editedItem:{},defaultItem:{},headers:u.TABLE_HEADERS,items:[]}},watch:{search:function(){this.fetch()},dialog:function(t){t||this.closeDialog()}},methods:{toggleExpand:function(t){t.expanded=!t.expanded},editItemDialog:function(t){this.editedIndex=this.items.indexOf(t),this.editedItem=_()({},t),this.dialog=!0},closeDialog:function(){var t=this;this.dialog=!1,setTimeout(function(){t.editedItem=_()({},t.defaultItem),t.editedIndex=-1},300)},fetch:function(){this.loading=!0,v.search(this.search).then(this.onSuccess).catch(this.onError).finally(this.loadingEnd)},onSuccess:function(t){this.items=t.data},onError:function(t){console.log(t)},loadingEnd:function(){this.loading=!1}}},b={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{"grid-list-xs":""}},[a("loading-indicator",{attrs:{loading:t.loading}}),t._v(" "),a("v-toolbar",{staticStyle:{top:"56px"},attrs:{fixed:"","scroll-off-screen":"","scroll-toolbar-off-screen":""}},[a("v-container",{attrs:{fluid:"","grid-list-md":""}},[a("v-layout",{attrs:{row:"","align-center":""}},[a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{name:"nameSearch",label:"Поиск...","single-line":"","prepend-icon":"search"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)],1)],1)],1),t._v(" "),a("v-layout",{staticStyle:{"margin-top":"56px"},attrs:{row:"","align-center":""}},[a("v-flex",{attrs:{xs12:""}},[a("v-data-table",{attrs:{headers:t.headers,items:t.items,"item-key":"_id","hide-actions":"",loading:t.loading,"no-data-text":"Ничего не найдено"},scopedSlots:t._u([{key:"items",fn:function(e){return[a("pupil-table-row",{attrs:{props:e,searchQuery:t.search},on:{toggleExpand:t.toggleExpand}})]}},{key:"expand",fn:function(e){return[a("pupil-table-expand",{attrs:{pupil:e.item},on:{toggleEdit:t.editItemDialog}})]}}])},[a("v-progress-linear",{attrs:{slot:"progress",color:"teal",indeterminate:""},slot:"progress"})],1),t._v(" "),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v(" Статус ")])]),t._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[t._v("\n                      "+t._s(t.editedItem.firstName)+"\n                    ")])],1)],1)],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:"blue darken-1",flat:""},nativeOn:{click:function(e){return t.closeDialog(e)}}},[t._v("Cancel")])],1)],1)],1)],1)],1)],1)},staticRenderFns:[]},E=a("VU/8")(x,b,!1,null,null,null).exports,y={data:function(){return{loading:!0,dialog:!1,editedIndex:-1,editedItem:{},defaultItem:{},corps:{},selectedPlace:{},selectedAudience:{},headers:u.TABLE_HEADERS,items:[]}},created:function(){this.fetchCorps()},watch:{selectedPlace:function(t){this.$router.push({name:"Table",query:_()({},this.$route.query,{place:t._id})}),this.placeChanged()},dialog:function(t){t||this.closeDialog()}},methods:{toggleExpand:function(t){t.expanded=!t.expanded},placeChanged:function(){this.selectedAudience=u.NONE_AUDIENCE,this.fetch(this.$route.query)},editItemDialog:function(t){this.editedIndex=this.items.indexOf(t),this.editedItem=_()({},t),this.dialog=!0},closeDialog:function(){var t=this;this.dialog=!1,setTimeout(function(){t.editedItem=_()({},t.defaultItem),t.editedIndex=-1},300)},fetch:function(t){this.loading=!0,v.getPupils(t).then(this.onPupilsSuccess).catch(this.onError).finally(this.loadingEnd)},fetchCorps:function(){v.getCorps(this.$route.query.corps).then(this.onCorpsSuccess).catch(this.onError)},onPupilsSuccess:function(t){this.items=t.data},onCorpsSuccess:function(t){var e=this.$route.query.place||"",a=0,n=t.data.places.length,i=0,s=[];if(this.corps=t.data,n>1){for(this.corps.places.unshift(u.NONE_PLACE),n+=1;a<n;a++)this.corps.places[a]._id===e&&(i=a),s=s.concat(this.corps.places[a].audience);this.corps.places[0].audience=s.sort(I)}this.selectedPlace=this.corps.places[i]},getFIO:function(t){return t.firstName+" "+t.lastName+" "+t.parentName},loadingEnd:function(){this.loading=!1},onError:function(t){console.log(t)}}};function I(t,e){return t.code>=e.code}var C={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{fluid:"","grid-list-xs":""}},[a("loading-indicator",{attrs:{loading:t.loading}}),t._v(" "),t.corps.name?a("v-toolbar",{staticStyle:{top:"56px"},attrs:{extended:"",fixed:"","scroll-off-screen":"","scroll-toolbar-off-screen":""}},[a("v-toolbar-title",{staticClass:"body-2 grey--text"},[t._v("\n              "+t._s(t.corps.name)+" \n              ("),t._l(t.corps.places,function(e){return a("span",{key:e._id},[""!==e._id?a("span",[t._v(t._s(e.code)+" ")]):t._e()])}),t._v(")\n            ")],2),t._v(" "),a("v-container",{attrs:{slot:"extension",fluid:"","grid-list-md":""},slot:"extension"},[a("v-layout",{attrs:{row:"",wrap:""}},[t.corps.places?a("v-flex",{attrs:{xs4:""}},[a("v-select",{attrs:{items:t.corps.places,label:"Select","single-line":"",combobox:"","item-text":"code","item-value":"_id"},model:{value:t.selectedPlace,callback:function(e){t.selectedPlace=e},expression:"selectedPlace"}})],1):t._e(),t._v(" "),a("v-flex",{attrs:{xs4:""}},[a("v-select",{attrs:{items:t.selectedPlace.audience,label:"Select","single-line":"",combobox:"","item-text":"name","item-value":"_id"},model:{value:t.selectedAudience,callback:function(e){t.selectedAudience=e},expression:"selectedAudience"}})],1),t._v(" "),a("v-flex",{attrs:{xs4:"","text-xs-right":""}},[a("p",{staticClass:"headline"})])],1)],1)],1):t._e(),t._v(" "),a("v-layout",{staticStyle:{"margin-top":"106px"},attrs:{column:"","align-center":""}},[a("v-flex",{attrs:{xs12:""}},[a("v-data-table",{attrs:{headers:t.headers,items:t.items,"item-key":"_id",search:t.selectedAudience._id,"hide-actions":"",loading:t.loading,"no-data-text":"Ничего не найдено"},scopedSlots:t._u([{key:"items",fn:function(e){return[a("pupil-table-row",{attrs:{props:e},on:{toggleExpand:t.toggleExpand}})]}},{key:"expand",fn:function(e){return[a("pupil-table-expand",{attrs:{pupil:e.item},on:{toggleEdit:t.editItemDialog}})]}}])},[a("v-progress-linear",{attrs:{slot:"progress",color:"blue",indeterminate:""},slot:"progress"})],1),t._v(" "),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v(" Статус ")])]),t._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[t._v("\n                      "+t._s(t.editedItem.firstName)+"\n                    ")])],1)],1)],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:"blue darken-1",flat:""},nativeOn:{click:function(e){return t.closeDialog(e)}}},[t._v("Cancel")])],1)],1)],1)],1)],1)],1)},staticRenderFns:[]},A=a("VU/8")(y,C,!1,null,null,null).exports;n.a.use(p.a,c.a),n.a.use(r.a);var k=new r.a({routes:[{path:"/",name:"Home",component:f},{path:"/search",name:"Search",component:E},{path:"/table",name:"Table",component:A}]}),w=a("3EgV"),N=a.n(w),S=[];v.getDictionary().then(function(t){S=t.data}).catch(function(t){console.log(t)});var D={getters:{DICTIONARY:function(){return S}}},R={render:function(){var t=this.$createElement,e=this._self._c||t;return this.loading?e("v-layout",{staticClass:"loading-container",attrs:{row:"","align-center":""}},[e("v-flex",{attrs:{xs12:"","text-xs-center":""}},[e("v-progress-circular",{attrs:{indeterminate:"",color:"primary"}})],1)],1):this._e()},staticRenderFns:[]};var $=a("VU/8")({name:"v-loading-indicator",props:["loading"]},R,!1,function(t){a("iC61")},"data-v-384ae28a",null).exports,O={name:"pupil-table-row",props:["props","searchQuery"],data:function(){return{DICTIONARY:D.getters.DICTIONARY()}},methods:{toggleExpand:function(){this.$emit("toggleExpand",this.props)},highlight:function(t){return t.replace(new RegExp(this.searchQuery,"gi"),"<b>$&</b>")},getFIO:function(){var t=this.props.item.firstName;return this.searchQuery&&(t=this.highlight(this.props.item.firstName)),t+" "+this.props.item.lastName+" "+this.props.item.parentName}}},T={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",{on:{click:t.toggleExpand}},[a("td",[a("span",{domProps:{innerHTML:t._s(t.getFIO())}})]),t._v(" "),a("td",[t.DICTIONARY.audiences[t.props.item.audience]?a("span",[t._v("\n            "+t._s(t.DICTIONARY.audiences[t.props.item.audience].name)+"\n        ")]):t._e(),t._v(" "),a("br"),t._v(" "),t.DICTIONARY.places[t.props.item.place]?a("span",[a("nobr",{staticClass:"grey--text text--darken-2"},[t._v("\n            "+t._s(t.DICTIONARY.places[t.props.item.place].code)+"\n            ")])],1):t._e()])])},staticRenderFns:[]},P=a("VU/8")(O,T,!1,null,null,null).exports,U={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{attrs:{flat:""}},[a("v-container",{attrs:{"fill-height":"",fluid:""}},[a("v-layout",{attrs:{"fill-height":""}},[a("v-flex",{attrs:{xs12:"","align-end":"",flexbox:""}},[t._v("\n            Профиль: "+t._s(t.pupil.profile)+"\n        "),a("br"),t._v("\n        Телефон: "+t._s(t.pupil.phone)+"\n        "),a("br"),t._v("\n        email: "+t._s(t.pupil.email)+"\n        ")]),t._v(" "),a("v-btn",{attrs:{icon:"",absolute:"",right:"",dark:"",color:"pink"},on:{click:t.toggleEdit}},[a("v-icon",{attrs:{dark:""}},[t._v("edit")])],1)],1)],1)],1)},staticRenderFns:[]},F=a("VU/8")({name:"pupil-table-expand",props:["pupil"],methods:{toggleEdit:function(){this.$emit("toggleEdit",this.pupil)}}},U,!1,null,null,null).exports;a("7zck");n.a.use(N.a),n.a.use(v),n.a.use(D),n.a.component("loading-indicator",$),n.a.component("pupil-table-row",P),n.a.component("pupil-table-expand",F),n.a.config.productionTip=!1,new n.a({el:"#app",router:k,components:{App:o},template:"<App/>",CONSTANTS:u})},XF4I:function(t,e){},iC61:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.9b25cd194d57dcccba6b.js.map